<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:a="http://schemas.actiprosoftware.com/avaloniaui"
                    xmlns:components="using:AutoSpex.Client.Components"
                    xmlns:observers="clr-namespace:AutoSpex.Client.Observers"
                    xmlns:properties="clr-namespace:AutoSpex.Client.Resources.Properties">
    <Design.PreviewWith>
        <Border Padding="30">
            <components:SpecList Height="300" Width="1000"
                                 Specs="{x:Static components:DesignData.Specs}" />
        </Border>
    </Design.PreviewWith>

    <ControlTheme x:Key="{x:Type components:SpecList}" TargetType="components:SpecList">
        <Setter Property="Template">
            <ControlTemplate>
                <components:Section>
                    <components:Section.Header>
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="10" Margin="5 0 10 0">
                                <CheckBox
                                    x:Name="CheckAll"
                                    Classes="size-xs accent"
                                    Theme="{a:ControlTheme CheckBoxSolid}" />

                                <TextBlock
                                    Text="Specs"
                                    FontWeight="{a:ThemeResource HeadingFontWeightMedium}" />

                                <PathIcon
                                    Theme="{StaticResource IconInfoOutline}"
                                    Margin="0 1 0 0"
                                    ToolTip.Tip="" />
                            </StackPanel>

                            <TextBox x:Name="FilterText"
                                     Grid.Column="1"
                                     Theme="{a:ControlTheme TextBoxSoft}"
                                     Watermark="Filter specs"
                                     VerticalContentAlignment="Center" HorizontalAlignment="Center"
                                     Width="300" Height="30"
                                     Padding="0 5">
                                <TextBox.InnerLeftContent>
                                    <PathIcon Theme="{StaticResource IconFilter}"
                                              Margin="5 0" />
                                </TextBox.InnerLeftContent>
                            </TextBox>

                            <StackPanel Grid.Column="2"
                                        Orientation="Horizontal"
                                        VerticalAlignment="Center"
                                        Spacing="5">
                                <Button properties:ButtonIcon.Theme="{StaticResource IconAdd}"
                                        Theme="{StaticResource IconButton}"
                                        Command="{Binding AddCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                        Classes="accent"
                                        ToolTip.Tip="Add Criteria" />
                                <Button properties:ButtonIcon.Theme="{StaticResource IconTrashOutlined}"
                                        Theme="{StaticResource IconButton}"
                                        Command="{Binding RemoveCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                        ToolTip.Tip="Delete Selected" />
                                <Button properties:ButtonIcon.Theme="{StaticResource IconCopyOutlined}"
                                        Theme="{StaticResource IconButton}"
                                        Command="{Binding CopyCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                        ToolTip.Tip="Copy Selected" />
                                <Button properties:ButtonIcon.Theme="{StaticResource IconDotsVertical}"
                                        Theme="{StaticResource IconButton}">

                                </Button>
                            </StackPanel>
                        </Grid>
                    </components:Section.Header>

                    <Panel>
                        <components:NoItemsMessage
                            HeaderText="No specs defined"
                            MessageIcon="{StaticResource IconAdd}"
                            MessageText="add a new criteria to this spec."
                            IsVisible="{Binding !Specs.Count, RelativeSource={RelativeSource TemplatedParent}}" />

                        <ListBox ItemsSource="{TemplateBinding Specs}"
                                 IsVisible="{Binding Specs.Count, RelativeSource={RelativeSource TemplatedParent}, FallbackValue=0}"
                                 SelectionMode="Multiple"
                                 ClipToBounds="True"
                                 BorderThickness="0" CornerRadius="5"
                                 Background="Transparent">
                            <ListBox.ItemTemplate>
                                <DataTemplate x:DataType="observers:NodeObserver">
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <CheckBox
                                            Grid.Column="0"
                                            Classes="size-xs accent"
                                            Theme="{a:ControlTheme CheckBoxSolid}"
                                            IsChecked="{Binding IsChecked}" />
                                        <StackPanel
                                            Grid.Column="1"
                                            Orientation="Horizontal"
                                            Spacing="2" Margin="4 0">
                                            <PathIcon Theme="{StaticResource IconSpecThemed}" />
                                            <TextBlock Text="{Binding Name}" />
                                        </StackPanel>

                                        <Panel Grid.Column="2">
                                            <TextBlock
                                                Text="{Binding Path}"
                                                IsVisible="{Binding !$parent[ListBoxItem].IsPointerOver}"
                                                TextAlignment="Right"
                                                Foreground="{a:ThemeResource DefaultForegroundBrushDisabled}" />
                                            <Button Theme="{StaticResource IconButtonSmall}"
                                                    properties:ButtonIcon.Theme="{StaticResource IconLaunchOutlined}"
                                                    IsVisible="{Binding $parent[ListBoxItem].IsPointerOver}" />
                                        </Panel>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                            <ListBox.ItemContainerTheme>
                                <ControlTheme TargetType="ListBoxItem"
                                              BasedOn="{StaticResource ListBoxItemSection}"
                                              x:DataType="observers:NodeObserver">
                                    <Setter Property="Padding" Value="10 2" />
                                </ControlTheme>
                            </ListBox.ItemContainerTheme>
                        </ListBox>
                    </Panel>
                </components:Section>
            </ControlTemplate>
        </Setter>
    </ControlTheme>
</ResourceDictionary>