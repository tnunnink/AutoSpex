<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:observers="clr-namespace:AutoSpex.Client.Observers"
                    xmlns:controls="clr-namespace:AutoSpex.Client.Resources.Controls"
                    xmlns:components="clr-namespace:AutoSpex.Client.Components"
                    xmlns:a="http://schemas.actiprosoftware.com/avaloniaui">

    <Design.PreviewWith>
        <Border Width="800" Height="600">
            <ContentControl
                Content="{x:Static components:TestData.QueryObserver}"
                ContentTemplate="{DynamicResource QuerySection}"
                Margin="20" VerticalAlignment="Top" />
        </Border>
    </Design.PreviewWith>

    <DataTemplate x:Key="QuerySection" x:DataType="observers:QueryObserver">

        <StackPanel Spacing="20">

            <controls:Section
                Header="Query"
                Description="Select the element type to query when this specification is run."
                ShowContent="False">

                <controls:Section.Icon>
                    <PathIcon Theme="{StaticResource IconFilledBinoculars}" />
                </controls:Section.Icon>

                <controls:Section.Action>
                    <ContentControl
                        Content="{Binding }"
                        ContentTemplate="{StaticResource ElementEntry}" />
                </controls:Section.Action>

            </controls:Section>

            <ItemsControl ItemsSource="{Binding Steps}" IsVisible="{Binding Steps.Count}">

                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Spacing="20" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <a:TypedDataTemplateSelector>
                        <DataTemplate x:DataType="observers:FilterObserver">
                            <ContentControl
                                Content="{Binding}"
                                ContentTemplate="{StaticResource FilterSection}" />
                        </DataTemplate>
                        <DataTemplate x:DataType="observers:SelectObserver">
                            <ContentControl
                                Content="{Binding}"
                                ContentTemplate="{StaticResource SelectSection}" />
                        </DataTemplate>
                    </a:TypedDataTemplateSelector>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <StackPanel Orientation="Horizontal" Spacing="10">

                <Button
                    Command="{Binding AddFitlerStepCommand}"
                    HorizontalAlignment="Left" MinWidth="100"
                    Theme="{a:ControlTheme ButtonSoft}"
                    Background="{a:ThemeResource Container2BackgroundBrush}"
                    Foreground="{a:ThemeResource DefaultForegroundBrushSecondary}">
                    <StackPanel Orientation="Horizontal" Spacing="7">
                        <PathIcon Theme="{StaticResource IconFilledFunnel}" Classes="size-sm" />
                        <TextBlock Text="Add Filter" FontWeight="{a:ThemeResource HeadingFontWeightSmall}" />
                    </StackPanel>
                </Button>

                <Button
                    Command="{Binding AddSelectStepCommand}"
                    HorizontalAlignment="Left" MinWidth="100"
                    Theme="{a:ControlTheme ButtonSoft}"
                    Background="{a:ThemeResource Container2BackgroundBrush}"
                    Foreground="{a:ThemeResource DefaultForegroundBrushSecondary}">
                    <StackPanel Orientation="Horizontal" Spacing="7">
                        <PathIcon Theme="{StaticResource IconFilledHand}" Classes="size-sm" />
                        <TextBlock Text="Add Select" FontWeight="{a:ThemeResource HeadingFontWeightSmall}" />
                    </StackPanel>
                </Button>

            </StackPanel>

        </StackPanel>

    </DataTemplate>
</ResourceDictionary>