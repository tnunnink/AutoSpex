<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:a="http://schemas.actiprosoftware.com/avaloniaui"
                    xmlns:components="using:AutoSpex.Client.Components"
                    xmlns:observers="clr-namespace:AutoSpex.Client.Observers"
                    xmlns:properties="clr-namespace:AutoSpex.Client.Resources.Properties">

    <Design.PreviewWith>
        <components:VariableList Width="800" Height="500" Variables="{x:Static components:DesignData.Variables}" />
    </Design.PreviewWith>

    <ControlTheme x:Key="{x:Type components:VariableList}" TargetType="components:VariableList">
        <Setter Property="Template">
            <ControlTemplate>
                <Grid RowDefinitions="Auto,*"
                      Margin="10">
                    <DockPanel LastChildFill="False">
                        <StackPanel DockPanel.Dock="Left" Orientation="Horizontal">
                            <CheckBox
                                x:Name="CheckAll"
                                Theme="{a:ControlTheme CheckBoxSolid}"
                                Classes="size-xs accent"
                                Margin="10 0" Padding="0" />
                            <Button
                                Command="{Binding AddVariableCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                Theme="{StaticResource IconButtonPillLeft}"
                                properties:ButtonIcon.Theme="{StaticResource IconAdd}"
                                Classes="accent"
                                ToolTip.Tip="Add Variable" />
                            <Button
                                Command="{Binding RemoveCheckedCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                Theme="{StaticResource IconButtonPillCenter}"
                                properties:ButtonIcon.Theme="{StaticResource IconTrashOutlined}"
                                ToolTip.Tip="Delete Variable" />
                            <Button
                                Theme="{StaticResource IconButtonPillRight}"
                                properties:ButtonIcon.Theme="{StaticResource IconDots}" />
                        </StackPanel>

                        <TextBox DockPanel.Dock="Right"
                                 MinWidth="300" Height="30"
                                 BorderBrush="{a:ThemeResource ButtonBorderBrushOutline}"
                                 Watermark="Filter Variables"
                                 VerticalContentAlignment="Center"
                                 Padding="10 0">
                            <TextBox.InnerLeftContent>
                                <PathIcon Theme="{StaticResource IconSearch}"
                                          Foreground="{a:ThemeResource DefaultForegroundBrushTertiary}"
                                          Padding="9" />
                            </TextBox.InnerLeftContent>
                        </TextBox>
                    </DockPanel>

                    <!--No Criteria View-->
                    <StackPanel Grid.Row="1"
                                IsVisible="{Binding !Variables.Count, RelativeSource={RelativeSource TemplatedParent}}"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Margin="20">
                        <TextBlock
                            Text="No variables defined"
                            Foreground="{a:ThemeResource DefaultForegroundBrushTertiary}"
                            FontWeight="SemiBold"
                            HorizontalAlignment="Center" />

                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center">
                            <TextBlock
                                Text="Click the "
                                Foreground="{a:ThemeResource DefaultForegroundBrushDisabled}"
                                TextAlignment="Center" />
                            <PathIcon
                                Theme="{StaticResource IconAdd}"
                                Foreground="{a:ThemeResource ControlForegroundBrushOutlineAccent}"
                                Height="20" Width="20" Padding="4" Margin="0 2 0 0" />
                            <TextBlock Text=" button to add a new variable to this node."
                                       Foreground="{a:ThemeResource DefaultForegroundBrushDisabled}"
                                       TextAlignment="Center" />
                        </StackPanel>
                    </StackPanel>

                    <!--Variable List-->
                    <ListBox x:Name="VariableList"
                             Grid.Row="1"
                             ItemsSource="{TemplateBinding Variables}"
                             IsVisible="{Binding Variables.Count, RelativeSource={RelativeSource TemplatedParent}, FallbackValue=0}"
                             BorderThickness="0"
                             ScrollViewer.HorizontalScrollBarVisibility="Auto">
                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType="observers:VariableObserver">
                                <components:VariableListItem
                                    RemoveCommand="{Binding $parent[components:VariableList].RemoveVariableCommand}" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemContainerTheme>
                            <ControlTheme TargetType="ListBoxItem" BasedOn="{StaticResource ListBoxItemInvisible}">
                                <Setter Property="Padding" Value="0 4" />
                            </ControlTheme>
                        </ListBox.ItemContainerTheme>
                    </ListBox>
                </Grid>
            </ControlTemplate>
        </Setter>
    </ControlTheme>
</ResourceDictionary>